<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Lista de Tarefas</title>
    <!-- Mantido: importação do CSS principal -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <header>
        <!-- Mudança no título: agora mais direto -->
        <h1>Lista de Tarefas</h1>
    </header>

    <main>
        <!-- Formulário simplificado (removido maxlength e autocomplete do input) -->
        <form method="POST" action="/add">
            <input type="text" name="descricao" placeholder="Digite sua tarefa..." required>
            <button type="submit">Adicionar</button>
        </form>

        <!-- Alterado de <section> para <div> apenas por escolha semântica -->
        <div class="tarefas">
            <h2>Tarefas</h2>
            <ul>
                {% for tarefa in tarefas %}
                <li>
                    <!-- NOVO BLOCO: agora o texto e o status da tarefa são agrupados -->
                    <div class="tarefa-info">
                        <!-- Adicionada condição inline para aplicar classe "concluida" dinamicamente -->
                        <!-- Adicionado atributo title="{{ tarefa.descricao }}" para mostrar o texto completo ao passar o mouse -->
                        <span class="{% if tarefa.status == 'concluída' %}concluida{% endif %}"
                            title="{{ tarefa.descricao }}">
                            {{ tarefa.descricao }}
                        </span>

                        <!-- Alterado o <span> do status para <small> -->
                        <!-- Adicionadas classes dinâmicas: "pendente" (amarelo) e "concluida" (verde) -->
                        <small
                            class="status {% if tarefa.status == 'pendente' %}pendente{% elif tarefa.status == 'concluída' %}concluida{% endif %}">
                            {{ tarefa.status }}
                        </small>
                    </div>

                    <!-- NOVO BLOCO: os botões foram separados em um container próprio -->
                    <!-- Isso permite alinhá-los à direita com flexbox no CSS -->
                    <div class="botoes">
                        {% if tarefa.status != 'concluída' %}
                        <!-- Botão “Concluir” continua com a lógica condicional -->
                        <a href="/concluir/{{ tarefa.id }}" class="btn-concluir">Concluir</a>
                        {% endif %}
                        <!-- NOVOS BOTÕES adicionados -->
                        <a href="/editar/{{ tarefa.id }}" class="btn-editar">Editar</a>
                        <a href="/excluir/{{ tarefa.id }}" class="btn-excluir"
                            onclick="return confirm('Tem certeza que deseja excluir esta tarefa?')">Excluir</a>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
    </main>
    <footer>
        <!-- Texto do rodapé atualizado -->
        <p>Organize suas tarefas e durma tranquilo.</p>
    </footer>

</body>

</html>